!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.BlenderUI=t()}(this,function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t=function(e,t,n){var i=e[t];return void 0!==i?i:n},n=function(e){return!e.hasOwnProperty("children")};var i,r=function(){return{parent:null,children:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},removeChild:function(e){for(var t=this.children.length-1;t>=0;t--)e(this.children[t])&&this.children.splice(t,1)},addChild:function(){if(console.log(arguments),0!==arguments.length){var e=arguments[arguments.length-1],i=arguments.length-1;if(!n(e)){i=arguments.length,e={};var r=this.children.length}for(var a=[],o=0;o<i;o++){var s=arguments[o];s.parent=this,a.push(s)}if(n(e)){var l=t(e,"after",void 0);r=void 0===l?this.children.length:this.children.findIndex(function(e){return e.data.id===l})+1}return this.children.splice.apply(this.children,[r,0].concat(a)),a}}}},a=(function(e,t){var n,i,r,a,o,s,l,d,c;e.exports=(n=window,i=n.document,r="addEventListener",a="removeEventListener",o="getBoundingClientRect",s=function(){return!1},l=n.attachEvent&&!n[r],d=["","-webkit-","-moz-","-o-"].filter(function(e){var t=i.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",c=function(e){return"string"==typeof e||e instanceof String?i.querySelector(e):e},function(e,t){var u,h,f,v;void 0===t&&(t={});var p=c(e[0]).parentNode,m=n.getComputedStyle(p).flexDirection,g=t.sizes||e.map(function(){return 100/e.length}),y=void 0!==t.minSize?t.minSize:100,z=Array.isArray(y)?y:e.map(function(){return y}),S=void 0!==t.gutterSize?t.gutterSize:10,b=void 0!==t.snapOffset?t.snapOffset:30,w=t.direction||"horizontal",E=t.cursor||("horizontal"===w?"ew-resize":"ns-resize"),x=t.gutter||function(e,t){var n=i.createElement("div");return n.className="gutter gutter-"+t,n},C=t.elementStyle||function(e,t,n){var i={};return"string"==typeof t||t instanceof String?i[e]=t:i[e]=l?t+"%":d+"("+t+"% - "+n+"px)",i},M=t.gutterStyle||function(e,t){return(n={})[e]=t+"px",n;var n};function L(e,t,n){var i=C(u,t,n);Object.keys(i).forEach(function(t){return e.style[t]=i[t]})}function D(e){var t=v[this.a],n=v[this.b],i=t.size+n.size;t.size=e/this.size*i,n.size=i-e/this.size*i,L(t.element,t.size,this.aGutterSize),L(n.element,n.size,this.bGutterSize)}function G(){var e=v[this.a].element,t=v[this.b].element;this.size=e[o]()[u]+t[o]()[u]+this.aGutterSize+this.bGutterSize,this.start=e[o]()[f]}function T(e){var i=v[this.a].element,o=v[this.b].element;!this.dragging&&t.onDragStart&&t.onDragStart(),e.preventDefault(),this.dragging=!0,this.move=function(e){var n;this.dragging&&((n="touches"in e?e.touches[0][h]-this.start:e[h]-this.start)<=v[this.a].minSize+b+this.aGutterSize?n=v[this.a].minSize+this.aGutterSize:n>=this.size-(v[this.b].minSize+b+this.bGutterSize)&&(n=this.size-(v[this.b].minSize+this.bGutterSize)),D.call(this,n),t.onDrag&&t.onDrag())}.bind(this),this.stop=function(){var e=v[this.a].element,i=v[this.b].element;this.dragging&&t.onDragEnd&&t.onDragEnd(),this.dragging=!1,n[a]("mouseup",this.stop),n[a]("touchend",this.stop),n[a]("touchcancel",this.stop),this.parent[a]("mousemove",this.move),this.parent[a]("touchmove",this.move),delete this.stop,delete this.move,e[a]("selectstart",s),e[a]("dragstart",s),i[a]("selectstart",s),i[a]("dragstart",s),e.style.userSelect="",e.style.webkitUserSelect="",e.style.MozUserSelect="",e.style.pointerEvents="",i.style.userSelect="",i.style.webkitUserSelect="",i.style.MozUserSelect="",i.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor=""}.bind(this),n[r]("mouseup",this.stop),n[r]("touchend",this.stop),n[r]("touchcancel",this.stop),this.parent[r]("mousemove",this.move),this.parent[r]("touchmove",this.move),i[r]("selectstart",s),i[r]("dragstart",s),o[r]("selectstart",s),o[r]("dragstart",s),i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.MozUserSelect="none",i.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",this.gutter.style.cursor=E,this.parent.style.cursor=E,G.call(this)}"horizontal"===w?(u="width",h="clientX",f="left"):"vertical"===w&&(u="height",h="clientY",f="top");var N=[];function O(e){e.forEach(function(t,n){if(n>0){var i=N[n-1],r=v[i.a],a=v[i.b];r.size=e[n-1],a.size=t,L(r.element,r.size,i.aGutterSize),L(a.element,a.size,i.bGutterSize)}})}function k(){N.forEach(function(e){e.parent.removeChild(e.gutter),v[e.a].element.style[u]="",v[e.b].element.style[u]=""})}return v=e.map(function(t,n){var i,a={element:c(t),size:g[n],minSize:z[n]};if(n>0&&((i={a:n-1,b:n,dragging:!1,isFirst:1===n,isLast:n===e.length-1,direction:w,parent:p}).aGutterSize=S,i.bGutterSize=S,i.isFirst&&(i.aGutterSize=S/2),i.isLast&&(i.bGutterSize=S/2),"row-reverse"===m||"column-reverse"===m)){var s=i.a;i.a=i.b,i.b=s}if(!l&&n>0){var d=x(n,w);!function(e,t){var n=M(u,t);Object.keys(n).forEach(function(t){return e.style[t]=n[t]})}(d,S),d[r]("mousedown",T.bind(i)),d[r]("touchstart",T.bind(i)),p.insertBefore(d,a.element),i.gutter=d}0===n||n===e.length-1?L(a.element,a.size,S/2):L(a.element,a.size,S);var h=a.element[o]()[u];return h<a.minSize&&(a.minSize=h),n>0&&N.push(i),a}),l?{setSizes:O,destroy:k}:{setSizes:O,getSizes:function(){return v.map(function(e){return e.size})},collapse:function(e){if(e===N.length){var t=N[e-1];G.call(t),l||D.call(t,t.size-t.bGutterSize)}else{var n=N[e];G.call(n),l||D.call(n,n.aGutterSize)}},destroy:k}})}(i={exports:{}},i.exports),i.exports);function o(e,t){for(var n in t)e[n]=t[n];return e}var s={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},l={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},d=function(e,t){var n,i=o(l,arguments[2]||{}),r=null;for(var a in s)if(s[a].test(t)){r=a;break}if(!r)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return document.createEvent?(n=document.createEvent(r),"HTMLEvents"==r?n.initEvent(t,i.bubbles,i.cancelable):n.initMouseEvent(t,i.bubbles,i.cancelable,document.defaultView,i.button,i.pointerX,i.pointerY,i.pointerX,i.pointerY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,e),e.dispatchEvent(n)):(i.clientX=i.pointerX,i.clientY=i.pointerY,n=o(document.createEventObject(),i),e.fireEvent("on"+t,n)),e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var u="viewport-content",h="split-drag",f=(e.attachEvent&&e[addEventListener],function(){return!1}),v=function(e){return"string"==typeof(t=e)||t instanceof String?document.querySelector(e):e;var t},p=function(e,t,n){var i=e[t];return void 0!==i?i:n},m=function(e,t){return Math.sqrt(e*e+t*t)},g="horizontal",y="vertical",z=function(e){return e===g};function S(e){return"object"===("undefined"==typeof HTMLElement?"undefined":c(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":c(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;window.Split=a;var i=function(e,t,n){return 100*(n-e)/t};var o=function(e){return e.querySelector("."+u)};function s(e,t){t.innerHTML=e.innerHTML}function l(e){var t=e.data.el.querySelector("."+h);e.data.listeners={mousedown:function(e){var t=this.data;this.data.isMouseDown=!0,t.origin={x:e.clientX,y:e.clientY},q=this}.bind(e)},e.data.listeners.touchdown=e.data.listeners.mousedown,t.addEventListener("mousedown",e.data.listeners.mousedown),t.addEventListener("touchdown",e.data.listeners.touchdown)}function c(e,t){if(void 0===t)if(void 0===e.data.direction){if(0===e.children.length)return[];t=g}else t=e.data.direction;var n=e.children.map(function(e){return e.data.el});return z(t)||n.reverse(),n}function b(e){return e.data.split?e.data.split.getSizes():[100]}function w(e){var t=e.parent,n=c(t);return b(t),n.indexOf(e.data.el)}function E(e,t){var n=e.getBoundingClientRect(),i=z(t);return{start:i?n.left:n.top,size:i?n.width:n.height}}function x(e){var t=e.data.el.querySelector("."+h);t.removeEventListener("mousedown",e.data.listeners.mousedown),t.removeEventListener("touchdown",e.data.listeners.touchdown)}function C(e){if(e.preventDefault(),null!==q){var t=q.data;if(t.isMouseDown){var u={x:e.clientX-t.origin.x,y:e.clientY-t.origin.y};if(t.isDragging)(function(e,t,n){var i=this,r=this.data,o=i.parent.data.direction,s=z(o),l=i.parent.children.findIndex(function(e){return e===i}),d=i.parent.children[l+1],u=E(r.el,o),h=u.start,f=u.size,v=E(d.data.el,o),p=s?t.x+n.x:t.y+n.y;p=s?Math.min(Math.max(h+N,p),v.start+v.size-N):Math.min(Math.max(v.start+N,p),h+f-N),L(i.parent.data.el);var m=c(i.parent),g=w(i),y=i.parent.data.split.getSizes(),S=y[g],b=1*S/f*(s?p-h:h+f-p),x=b-S;y[g+(s?1:-1)]-=x,y[g]=b,i.parent.data.split=a(m,{direction:o,sizes:y,minSize:N})}).call(q,e,t.origin,u);else if(t.isMouseDown&&m(u.x,u.y)>=T){var f=Math.abs(u.x)>=Math.abs(u.y)?g:y,v=function(e,t,d){var u=z(t);return u&&d.x>=0||!u&&d.y<=0?(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,i=e.parent,s=i.children;if(1!==s.length&&i.data.direction===t&&s[s.length-1]!==e){var d=s.findIndex(function(t){return t===e}),u=s[d+1];if(!u.data.direction){var h=i.data.split.getSizes(),f=d;z(t)||(f=s.length-f-1);var v=f+(z(t)?1:-1),p=h[f]+h[v];if(2===s.length){if(x(u),x(e),L(i.data.el),i.removeChild(function(e){return!0}),i.data.el.removeChild(u.data.el),i.data={el:i.data.el,id:i.data.id},null===i.parent)return n=1,e.data.el.removeAttribute("style"),e.data.el.className="viewport",e.data.el.id="v"+n,void i.addChild(r([],{el:e.data.el,id:n})).forEach(l);var m=o(e.data.el);return i.data.el.removeChild(e.data.el),i.data.el.appendChild(m),i.data.el.insertBefore(O(),m),i.data.el.className="viewport split split-"+i.parent.data.direction,void l(i)}console.log("merging"),h.splice(f-(z(t)?0:1),2,p),x(u),i.data.el.removeChild(u.data.el),i.removeChild(function(e){return e===u}),L(i.data.el);var y=c(i);i.data.split=a(y,{direction:t,sizes:h,minSize:N})}}}(this,t),!1):function(e){var t,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,u=z(d),f=e.parent;if(f.data.split&&f.data.direction!==d){var v=e.data.el,p=k(++n),m=k(++n);p.className+=" split split-"+d,m.className+=" split split-"+d;var y=E(v,d),S=y.start,C=y.size,M=i(S,C,S+C-N);if(M<i(S,C,S+N))return!1;var D=100-M;e.addChild(r([],{el:p,id:n-1}),r([],{el:m,id:n})).forEach(l);var G=o(v),T=o(p),O=o(m);H(v),s(t=G,T),t.innerHTML="",s(T,O),x(e),v.removeChild(v.querySelector("."+h)),v.removeChild(G),v.appendChild(u?p:m),v.appendChild(u?m:p),Y(m);var U=c(e,d);if(!u){var j=D;D=M,M=j}e.data.split=a(U,{direction:d,sizes:[M,100-M],minSize:N}),e.data.direction=d;var q=X(v,p,m);if(q){var K=document.createElement("div");K.appendChild(q),s(K,O)}return e.children[0]}var B=e.data.el,I=k(++n),A=f.data.el,P=E(B,d),F=P.start,R=P.size,$=i(F,R,F+R-N);if($<i(F,R,F+N))return!1;var V=100-$,J=w(e),Q=b(f),W=Q[J];$*=W/100,V*=W/100,B.className+=" split split-"+d,I.className+=" split split-"+d,f.addChild(r([],{el:I,id:n}),{after:e.data.id}).forEach(l);var Z=c(f,d),_=o(B),ee=o(I);if(s(_,ee),u?A.insertBefore(I,B.nextSibling):A.insertBefore(I,B),Y(I),!u){var te=V;V=$,$=te}L(A),Q.splice(J,1,$,V),f.data.split=a(Z,{direction:d,sizes:Q,minSize:N}),f.data.direction=d;var ne=X(f.data.el,B,I);if(ne){var ie=document.createElement("div");ie.appendChild(ne),s(ie,ee)}return e}(this,t)}.call(q,e,f,u);if(v){var p=v.data.el.querySelector("."+h),S=t.origin;M(),d(p,"mousedown",{pointerX:S.x,pointerY:S.y}),v.data.isDragging=!0}else M()}}}}function M(){if(null!==q){var e=q.data;delete e.isDragging,delete e.isMouseDown,delete e.origin,q=null}}function L(e){for(var t=e.firstChild;null!==t;){var n=t.nextSibling;S(t)?(-1!=t.className.indexOf("gutter")&&e.removeChild(t),t=n):t=n}}var D=v(e);if(!S(D))throw new Error("Please specify the correct container. This container is not a DOM element.");var G=r([],{el:D,id:n}),T=p(t,"dragThreshold",10),N=p(t,"minSize",50),O=p(t,"handle",function(){var e=document.createElement("div");return e.className=h,e}),k=p(t,"viewport",function(e){var t=document.createElement("div");t.className="viewport",t.id="v"+e;var n=document.createElement("div");return n.className=u,t.appendChild(O()),t.appendChild(n),t}),H=p(t,"viewportToContainer",function(e){return e.className+=" viewport-container",e}),U=p(t,"events",{}),X=p(U,"onSplit",f),Y=(p(U,"onMerge",f),p(U,"onCreate",f)),j=k(++n),q=null;D.appendChild(j);var K=r([],{el:j,id:n});G.addChild(K),document.addEventListener("mouseup",M),document.addEventListener("mousemove",C),document.addEventListener("touchmove",C),l(K),window.root=G}});
